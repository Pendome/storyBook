(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1621:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1661);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1660:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_style_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1621);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_style_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__).a},1661:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(269)(!1)).push([module.i,".my-setting {\n  padding-top: 60px;\n  padding-left: 60px;\n  width: 500px;\n}\n.my-setting .upload-img {\n    display: flex;\n    align-items: center;\n}\n.my-setting .upload-img .avater-box {\n      margin-right: 29px;\n      margin-left: 24px;\n}\n.my-setting .el-form-item__label {\n    text-align: center;\n}\n.my-setting .el-form-item__label {\n    font-size: 16px;\n    color: #191843;\n}\n.my-setting .el-input--mini .el-input__inner {\n    height: 32px;\n    font-size: 16px;\n    border: 0 none;\n}\n.my-setting .el-form-item--mini.el-form-item {\n    margin-bottom: 32px;\n}\n.my-setting .el-button--primary.is-plain {\n    width: 180px;\n    height: 32px;\n    font-size: 14px;\n    background-color: rgba(80, 154, 255, 0.4);\n    color: #2682FF;\n}\n.my-setting .save-btn {\n    width: 242px;\n    height: 32px;\n    font-size: 14px;\n    margin-left: 50px;\n}\n.my-setting .avatar-uploader .el-upload {\n    border: 0 none;\n    overflow: visible;\n}\n",""])},209:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(23),__webpack_require__(37);var defineProperty=__webpack_require__(12),vuex_esm=__webpack_require__(193),utils=__webpack_require__(1),mySetting=__webpack_require__(414),validate=__webpack_require__(275);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var views_mySettingvue_type_script_lang_js_={data:function data(){var _this=this;return{showPass:!1,passLoading:!1,saveLoading:!1,ruleForm:{realname:"",email:"",phone:""},passwordForm:{newPass:"",againPass:""},payWorld:{newPass:[{validator:function newPass(rule,value,callback){if(console.log(value),!value)return callback(new Error("请输入新密码"));callback()},trigger:"blur"}],againPass:[{validator:function againPass(rule,value,callback){return console.log(value),value?_this.passwordForm.newPass!==_this.passwordForm.againPass?callback(new Error("两次新密码不一致，请重新输入！")):void callback():callback(new Error("请输入确认密码"))},trigger:"blur"}]},userInfo:{},userRules:{realname:[{required:!0,message:"请输入姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function isEmailReg(rule,value,callback){if(console.log(value),!Object(validate.a)(value))return callback(new Error("请输入正确的邮箱"));callback()},trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function isMobileReg(rule,value,callback){if(console.log(value),!Object(validate.b)(value))return callback(new Error("请输入正确的手机号"));callback()},trigger:"blur"}]}}},created:function created(){this.userInfo=JSON.parse(utils.a.get("userMsg")),this.ruleForm.realname=this.userInfo.realname,this.ruleForm.email=this.userInfo.email,this.ruleForm.phone=this.userInfo.phone},mounted:function mounted(){this.SET_MENUTXT({icon:!1,title:"我的",txt:"个人设置"})},methods:_objectSpread(_objectSpread(_objectSpread({},Object(vuex_esm.d)("layout/layout",["SET_MENUTXT"])),Object(vuex_esm.b)("layout/layout",["ChangePass"])),{},{modifyPass:function modifyPass(formName){var _this2=this;console.log(formName),this.$refs[formName].validate((function(valid){if(!valid)return console.log("error submit!!"),_this2.passLoading=!1,!1;_this2.passLoading=!0,_this2.ChangePass(_this2.passwordForm).then((function(){_this2.passLoading=!1,_this2.loginOut().then((function(res){console.log("退出登录",res),_this2.$router.push({path:"/login"})})),_this2.$alert("修改成功","提示",{type:"success",confirmButtonText:"确定",callback:function callback(action){console.log(action)}}).catch((function(err){_this2.passLoading=!1,console.log(err)}))})).catch((function(){_this2.passLoading=!1}))}))},save:function save(){var _this3=this;this.$refs.ruleForm.validate((function(valid){if(!valid)return console.log("error submit!!"),_this3.saveLoading=!1,!1;_this3.saveLoading=!0;var params=_objectSpread({},_this3.ruleForm);params.uid=_this3.userInfo.uid,params.depart_id=_this3.userInfo.depart_id,params.usertype=_this3.userInfo.usertype,params.status=_this3.userInfo.status,mySetting.default.editinfo(params).then((function(){_this3.saveLoading=!1,_this3.$alert("保存成功")})).catch((function(){_this3.saveLoading=!1}))}))},beforeAvatarUpload:function beforeAvatarUpload(file){console.log(file)}})},componentNormalizer=(__webpack_require__(1660),__webpack_require__(96)),component=Object(componentNormalizer.a)(views_mySettingvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("basiCcontainer",[_c("div",{staticClass:"my-setting"},[_c("el-form",{ref:"ruleForm",attrs:{model:_vm.ruleForm,"hide-required-asterisk":!1,rules:_vm.userRules,"label-width":"70px",size:"mini","label-position":"left"}},[_c("el-form-item",{attrs:{"label-width":"0px",prop:"region"}},[_c("div",{staticClass:"upload-img"},[_c("Myavatar",{staticClass:"avater-box",attrs:{imgUrl:"",width:"80px",height:"80px",userName:_vm.userInfo.realname}}),_vm._v(" "),_c("el-upload",{staticClass:"avatar-uploader",attrs:{action:" string","show-file-list":!1,"before-upload":_vm.beforeAvatarUpload}},[_c("el-button",{attrs:{type:"primary",plain:""}},[_vm._v("点击上传新头像")])],1)],1)]),_vm._v(" "),_c("el-form-item",{attrs:{"label-width":"140px",label:"姓名",prop:"realname"}},[_c("el-input",{attrs:{placeholder:"请输入姓名",maxlength:"6"},model:{value:_vm.ruleForm.realname,callback:function($$v){_vm.$set(_vm.ruleForm,"realname",$$v)},expression:"ruleForm.realname"}})],1),_vm._v(" "),_c("el-form-item",{attrs:{"label-width":"140px",label:"邮箱",prop:"email"}},[_c("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:_vm.ruleForm.email,callback:function($$v){_vm.$set(_vm.ruleForm,"email",$$v)},expression:"ruleForm.email"}})],1),_vm._v(" "),_c("el-form-item",{attrs:{"label-width":"140px",label:"密码",prop:"region"}},[_c("el-button",{attrs:{type:"primary",plain:""},on:{click:function($event){_vm.showPass=!0}}},[_vm._v("点击修改密码")])],1),_vm._v(" "),_c("el-form-item",{attrs:{"label-width":"140px",label:"手机",prop:"phone"}},[_c("el-input",{attrs:{placeholder:"请输入手机",maxlength:"11"},model:{value:_vm.ruleForm.phone,callback:function($$v){_vm.$set(_vm.ruleForm,"phone",$$v)},expression:"ruleForm.phone"}})],1),_vm._v(" "),_c("el-form-item",{attrs:{"label-width":"0px",prop:"region"}},[_c("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:_vm.saveLoading},on:{click:_vm.save}},[_vm._v("保存")])],1)],1)],1),_vm._v(" "),_c("el-dialog",{attrs:{title:"密码管理",visible:_vm.showPass},on:{"update:visible":function($event){_vm.showPass=$event},close:function($event){return _vm.$refs.pass.clearValidate()}}},[_c("el-form",{ref:"pass",attrs:{model:_vm.passwordForm,rules:_vm.payWorld,"label-width":"150px"},nativeOn:{submit:function($event){$event.preventDefault()}}},[_c("el-form-item",{attrs:{label:"请输入新密码：",prop:"newPass"}},[_c("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:_vm.passwordForm.newPass,callback:function($$v){_vm.$set(_vm.passwordForm,"newPass",$$v)},expression:"passwordForm.newPass"}})],1),_vm._v(" "),_c("el-form-item",{attrs:{label:"请确认新密码：",prop:"againPass"}},[_c("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:_vm.passwordForm.againPass,callback:function($$v){_vm.$set(_vm.passwordForm,"againPass",$$v)},expression:"passwordForm.againPass"}})],1)],1),_vm._v(" "),_c("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[_c("el-button",{attrs:{size:"small"},on:{click:function($event){_vm.showPass=!1}}},[_vm._v("取 消")]),_vm._v(" "),_c("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary",size:"small",loading:_vm.passLoading},on:{click:function($event){return _vm.modifyPass("pass")}}},[_vm._v("修 改")])],1)],1)],1)}),[],!1,null,null,null);__webpack_exports__.default=component.exports}}]);
//# sourceMappingURL=mySetting.9cef9450fc4cbe6433a5.bundle.js.map