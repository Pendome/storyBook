(window.webpackJsonp=window.webpackJsonp||[]).push([[4,19,22],{1550:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return taskLevelMap})),__webpack_require__.d(__webpack_exports__,"a",(function(){return taskLevelKeyValue})),__webpack_require__.d(__webpack_exports__,"d",(function(){return taskStatusMap})),__webpack_require__.d(__webpack_exports__,"c",(function(){return taskStatusKeyValue}));__webpack_require__(102),__webpack_require__(158),__webpack_require__(1548);var taskLevelMap=[{key:4,name:"最高",color:"#FF3939",bgColor:"rgba(255,57,57, 0.1)"},{key:3,name:"中等",color:"#FFA85A",bgColor:"rgba(255,168,90,1, 0.1)"},{key:2,name:"普通",color:"#2682FF",bgColor:"rgba(38,130,255,1, 0.1)"},{key:1,name:"低",color:"#00B97E",bgColor:"rgba(0,185,126,1, 0.1)"}],taskLevelKeyValue=taskLevelMap.reduce((function(total,item){return total[item.key]=item.name,total}),{}),taskStatusMap=[{key:2,name:"已完成",color:"#00B97E",bgColor:"rgba(0,185,126,0.10)"},{key:1,name:"未完成",color:"#FFA350",bgColor:"rgba(255,163,80,0.20)"}],taskStatusKeyValue=taskStatusMap.reduce((function(total,item){return total[item.key]=item.name,total}),{})},1551:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1564);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1552:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1566);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1563:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_02e96b8b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1551);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_02e96b8b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},1564:function(module,exports,__webpack_require__){(exports=__webpack_require__(270)(!1)).push([module.i,"\n.my-card-box[data-v-02e96b8b] {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-shadow: 0 12px 28px 0 rgba(173, 196, 225, 0.18);\r\n          box-shadow: 0 12px 28px 0 rgba(173, 196, 225, 0.18);\r\n  border-radius: 4px;\r\n  background: #ffffff;\n}\n.my-card-top[data-v-02e96b8b] {\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  padding: 16px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\n}\n.my-card-bottom[data-v-02e96b8b] {\r\n  border-top: 1px solid #f5f9fe;\r\n  height: 40px;\r\n  line-height: 40px;;\r\n  padding: 0 16px;\n}\r\n",""]),module.exports=exports},1565:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1552);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},1566:function(module,exports,__webpack_require__){(exports=__webpack_require__(270)(!1)).push([module.i,"\n.my-avatar {\n  background: #d3e5ff;\n  border: 2px solid #ffffff;\n  border-radius: 50%;\n  overflow: hidden;\n}\n.my-avatar-txt,\n.my-avatar-img,\n.my-avatar .my-avatar-img img {\n  width: 100%;\n  height: 100%;\n}\n.my-avatar-txt {\n  color: #191843;\n  font-size: 12px;\n  text-align: center;\n}\n",""]),module.exports=exports},1569:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1602);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1570:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1605);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1571:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1607);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1575:function(module,__webpack_exports__,__webpack_require__){"use strict";var components_cardvue_type_script_lang_js_={name:"my-card"},componentNormalizer=(__webpack_require__(1563),__webpack_require__(96)),component=Object(componentNormalizer.a)(components_cardvue_type_script_lang_js_,(function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"my-card-box"},[_c("div",{staticClass:"my-card-top"},[this._t("top")],2),this._v(" "),_c("div",{staticClass:"my-card-bottom"},[this._t("bottom")],2)])}),[],!1,null,"02e96b8b",null);__webpack_exports__.a=component.exports},1576:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(159);var components_avatarvue_type_script_lang_js_={name:"myAvatar",props:{userName:{type:String,default:""},imgUrl:{type:String,default:""},width:{type:String,default:"40px"},height:{type:String,default:"40px"}},data:function data(){return{}},computed:{hasImgUrl:function hasImgUrl(){return""!==this.imgUrl},name:function name(){return this.userName.slice(-2)}},methods:{}},componentNormalizer=(__webpack_require__(1565),__webpack_require__(96)),component=Object(componentNormalizer.a)(components_avatarvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"my-avatar",style:{width:_vm.width,height:_vm.height,lineHeight:_vm.height}},[_vm.hasImgUrl?_c("div",{},[_c("img",{attrs:{src:_vm.imgUrl,alt:_vm.userName}})]):_c("div",{staticClass:"my-avatar-txt",attrs:{title:_vm.userName}},[_vm._v(_vm._s(_vm.name))])])}),[],!1,null,null,null);__webpack_exports__.a=component.exports},1601:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_taskTitle_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1569);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_taskTitle_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},1602:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(270),___CSS_LOADER_GET_URL_IMPORT___=__webpack_require__(684),___CSS_LOADER_URL_IMPORT_0___=__webpack_require__(1603);exports=___CSS_LOADER_API_IMPORT___(!1);var ___CSS_LOADER_URL_REPLACEMENT_0___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);exports.push([module.i,"\n.task-title-wrap {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\n}\n.task-title-wrap input {\r\n  background: #fff;\r\n  border:none;\r\n  font-size: 14px;\r\n  padding-left: 10px;\n}\n.title {\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  font-size: 12px;\r\n  height: 50px;\r\n  line-height: 50px;\n}\n.task-drag-box {\r\n  cursor: pointer;\r\n  width: 14px;\r\n  height: 14px;\r\n  background-image: url("+___CSS_LOADER_URL_REPLACEMENT_0___+");\r\n  background-size: cover;\r\n  margin-right: 10px;\n}\n.task-total {\r\n  font-size: 12px;\r\n  color: rgba(25,24,67,0.40);\n}\r\n",""]),module.exports=exports},1603:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/icno_arrow_drag@2x.8db8d779.png"},1604:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_79c5755b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1570);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_79c5755b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},1605:function(module,exports,__webpack_require__){(exports=__webpack_require__(270)(!1)).push([module.i,"\n.pop-select-item[data-v-79c5755b] {\r\n  cursor: pointer;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  padding:0 10px;\r\n  -webkit-transition: all 0.3s;\r\n  transition: all 0.3s;\n}\n.pop-select-item[data-v-79c5755b]:hover {\r\n  background-color: #F5F9FE;\n}\r\n",""]),module.exports=exports},1606:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_taskItem_vue_vue_type_style_index_0_id_7d01055c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1571);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_storybook_core_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_taskItem_vue_vue_type_style_index_0_id_7d01055c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},1607:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(270),___CSS_LOADER_GET_URL_IMPORT___=__webpack_require__(684),___CSS_LOADER_URL_IMPORT_0___=__webpack_require__(1608);exports=___CSS_LOADER_API_IMPORT___(!1);var ___CSS_LOADER_URL_REPLACEMENT_0___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);exports.push([module.i,"\n.task-principal[data-v-7d01055c] {\r\n  color: #191843;\r\n  font-size: 14px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\n}\n.task-principal .task-avatar[data-v-7d01055c] {\r\n  width: 26px;\r\n  height: 26px;\r\n  margin-right: 12px;\n}\n.task .project-title[data-v-7d01055c] {\r\n  font-size: 16px;\r\n  color: #191843;\n}\n.task .project-item[data-v-7d01055c] {\r\n  position: relative;\n}\n.task .finish[data-v-7d01055c] {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  background-color: rgba(255,255,255);\r\n  background-image: url("+___CSS_LOADER_URL_REPLACEMENT_0___+");\r\n  background-repeat: no-repeat;\r\n  background-position: right top;\r\n  opacity: 0.5;\r\n  pointer-events: none;\n}\r\n",""]),module.exports=exports},1608:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/img_success_task.f10490a3.png"},1609:function(module,exports,__webpack_require__){var api=__webpack_require__(128),content=__webpack_require__(1651);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1650:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_cjs_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_style_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1609);__webpack_require__.n(_node_modules_style_loader_dist_cjs_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_style_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__).a},1651:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(269)(!1)).push([module.i,".task-list {\n  padding: 10px;\n  height: 500px;\n  overflow: auto;\n}\n.add-card {\n  cursor: pointer;\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 500px;\n}\n.add-card:hover,\n.add-task:hover {\n  color: #409eff;\n}\n.add-task {\n  cursor: pointer;\n  height: 36px;\n  text-align: center;\n  line-height: 36px;\n  background: #CEE3FF;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #207EFF;\n}\n.flip-list-move {\n  transition: transform 0.5s;\n}\n.no-move {\n  transition: transform 0s;\n}\n.task.block-box {\n  border-right: 4px solid #fff;\n}\n.task .block-title {\n  height: 50px;\n  line-height: 50px;\n  padding: 0 10px;\n}\n.task .block-content {\n  padding: 0 10px;\n  flex: 1;\n}\n.expired.project-create-date {\n  color: rgba(255, 57, 57, 0.8);\n}\n.scoll-inner-wrap > div {\n  width: 100%;\n  position: relative;\n  flex: 1;\n  background: #f5f9fe;\n  border-radius: 4px;\n  display: flex;\n}\n",""])},207:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(34),__webpack_require__(29),__webpack_require__(9),__webpack_require__(202),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(37);var defineProperty=__webpack_require__(12),toConsumableArray=__webpack_require__(58),vuex_esm=(__webpack_require__(23),__webpack_require__(193)),addTask=__webpack_require__(683),addChecklist=__webpack_require__(686),vuedraggable_common=__webpack_require__(1648),vuedraggable_common_default=__webpack_require__.n(vuedraggable_common),taskTitle=__webpack_require__(687),taskItem=__webpack_require__(685);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var views_taskvue_type_script_lang_js_={components:{AddTask:addTask.default,TaskItem:taskItem.default,TaskTitle:taskTitle.default,AddChecklist:addChecklist.default,vuedraggable:vuedraggable_common_default.a},data:function data(){return{visibleAddChecklist:!1,visibleAddTask:!1,taskIsEdit:!1,taskList:[],departName:"",departId:null,projectName:"",projectId:null,parentId:0,checklistId:null,editData:{},userlist:[],departList:[],fitlerDepartIdList:[],memberList:[]}},computed:_objectSpread(_objectSpread({},Object(vuex_esm.c)(["isVP"])),{},{computedUserList:function computedUserList(){return this.memberList},dragOptions:function dragOptions(){return{animation:200,group:"description",disabled:!1}}}),created:function created(){var routerParams=this.$route.query;this.projectId=routerParams.projectId-0,this.fetchProjectInfo(),this.fetchProjectMember()},methods:_objectSpread(_objectSpread(_objectSpread(_objectSpread({},Object(vuex_esm.b)("project/project",["getProjectInfoById","getProjectMember"])),Object(vuex_esm.b)("task/task",["editTask"])),Object(vuex_esm.d)("layout/layout",["SET_MENUTXT"])),{},{fetchProjectMember:function fetchProjectMember(){var _this=this;this.getProjectMember({project_id:this.projectId}).then((function(res){_this.memberList=function tileData(dataList){var arr=[];return dataList.forEach((function(item){arr=[].concat(Object(toConsumableArray.a)(arr),Object(toConsumableArray.a)(item.member))})),arr}(res.ProjectMember)}))},fetchProjectInfo:function fetchProjectInfo(){var _this2=this;this.getProjectInfoById({project_id:this.projectId}).then((function(res){_this2.taskList=res.ProjectInfo.project_task_list,_this2.departId=res.ProjectInfo.project_depart_id,_this2.departName=res.ProjectInfo.project_depart_name,_this2.projectName=res.ProjectInfo.title,_this2.SET_MENUTXT({icon:!1,title:_this2.departName,txt:_this2.projectName})}))},addTask:function addTask(itemData){this.checklistId=itemData.task_list_id,this.visibleAddTask=!0,this.taskIsEdit=!1},addChecklist:function addChecklist(){this.visibleAddChecklist=!0},addSuccess:function addSuccess(){this.visibleAddTask=!1,this.visibleAddChecklist=!1,this.fetchProjectInfo()},taskClick:function taskClick(innerItem){var _this3=this;console.log("监听到了里面的事件传递"),this.taskIsEdit=!0,this.$nextTick((function(){_this3.editData=innerItem})),this.visibleAddTask=!0},end:function end(event){var taskId=event.clone.getAttribute("taskid"),searchList=[],result={task_id:taskId};if(this.taskList.forEach((function(item){0<item.project_task.length&&(item.project_task.some((function(innerItem){return innerItem.task_id==taskId}))&&(searchList=item.project_task))})),1!=searchList.length){var newIndex=event.newIndex,nextData=searchList[newIndex+1];nextData?(result.orderby=nextData.orderby+1,result.task_list_id=nextData.task_list_id,searchList[newIndex].orderby=nextData.orderby+1,searchList[newIndex].task_list_id=nextData.task_list_id):(result.orderby=searchList[newIndex-1].orderby-1,result.task_list_id=searchList[newIndex-1].task_list_id,searchList[newIndex].orderby=searchList[newIndex-1].orderby-1,searchList[newIndex].task_list_id=searchList[newIndex-1].task_list_id),this.editTask(result).then((function(){console.log("成功")}))}},goto:function goto(){this.$router.push({path:"/projectMember",query:{projectId:this.projectId,projectName:this.projectName}})}})},componentNormalizer=(__webpack_require__(1650),__webpack_require__(96)),component=Object(componentNormalizer.a)(views_taskvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"main-content"},[_c("div",{staticClass:"flex-box"},[_c("div",{staticClass:"c-top-nav"},[_c("el-link",{attrs:{underline:!1},on:{click:_vm.addChecklist}},[_c("i",{staticClass:"el-icon-plus"}),_vm._v(" 新建清单")]),_vm._v(" "),_c("div",{staticClass:"list-type"},[_c("span",{staticClass:"list-type-member"},[_vm._v("\n          项目成员: "),_c("span",{staticStyle:{"font-size":"12px",cursor:"pointer",color:"#207EFF"},on:{click:_vm.goto}},[_vm._v(" 查看 ")])]),_vm._v(" "),_vm._m(0),_vm._v(" "),_vm._m(1),_vm._v(" "),_vm._m(2),_vm._v(" "),_vm._m(3)])],1),_vm._v(" "),_c("div",{staticClass:"scoll-box"},[_c("div",{staticClass:"scoll-inner-wrap"},[_c("vuedraggable",_vm._b({attrs:{list:_vm.taskList}},"vuedraggable",_vm.dragOptions,!1),_vm._l(_vm.taskList,(function(item){return _c("div",{key:item.task_id,staticClass:"block-box task"},[_c("div",{staticClass:"block-title"},[_c("TaskTitle",{staticClass:"clearfix",attrs:{slot:"header",itemData:item},slot:"header"})],1),_vm._v(" "),_c("div",{staticClass:"block-content"},[_c("vuedraggable",_vm._b({attrs:{list:item.project_task,filter:".notdrag"},on:{end:_vm.end}},"vuedraggable",_vm.dragOptions,!1),_vm._l(item.project_task,(function(innerItem){return _c("TaskItem",{key:innerItem.task_id,attrs:{taskInfo:innerItem},on:{taskClick:_vm.taskClick}})})),1),_vm._v(" "),_c("div",{staticClass:"add-task",attrs:{slot:"footer"},on:{click:function($event){return _vm.addTask(item)}},slot:"footer"},[_c("i",{staticClass:"el-icon-plus"}),_vm._v("点击添加任务")])],1)])})),0)],1)])]),_vm._v(" "),_c("el-dialog",{attrs:{width:"40%",visible:_vm.visibleAddChecklist},on:{"update:visible":function($event){_vm.visibleAddChecklist=$event}}},[_c("AddChecklist",{attrs:{projectId:_vm.projectId},on:{success:_vm.addSuccess}})],1),_vm._v(" "),_c("el-drawer",{attrs:{size:"40%",visible:_vm.visibleAddTask,"with-header":!1,title:"添加任务"},on:{"update:visible":function($event){_vm.visibleAddTask=$event}}},[_c("AddTask",{attrs:{visible:_vm.visibleAddTask,projectId:_vm.projectId,userlist:_vm.computedUserList,checklistId:_vm.checklistId,parentId:_vm.parentId,isEdit:_vm.taskIsEdit,editData:_vm.editData},on:{"update:visible":function($event){_vm.visibleAddTask=$event},success:_vm.addSuccess}})],1)],1)}),[function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("span",{staticClass:"type-item active"},[_c("i",{staticClass:"iconfont iconicon_card_mode"})])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("span",{staticClass:"type-item"},[_c("i",{staticClass:"iconfont iconicon_list_mode"})])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("span",{staticClass:"type-item"},[_c("i",{staticClass:"iconfont iconicon_calendar_mode"})])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("span",{staticClass:"type-item"},[_c("i",{staticClass:"iconfont iconicon_time_line_mode"})])}],!1,null,null,null);__webpack_exports__.default=component.exports},683:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(271),__webpack_require__(36),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(23),__webpack_require__(37);var defineProperty=__webpack_require__(12),vuex_esm=(__webpack_require__(402),__webpack_require__(193)),utils_const=__webpack_require__(1550);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var task_addTaskvue_type_script_lang_js_={name:"",props:{editData:{type:Object,default:function _default(){return{}}},projectId:{type:Number,default:0},parentId:{type:Number,default:0},checklistId:{type:Number,default:0},isEdit:{type:Boolean,default:!1},userlist:{type:Array,default:function _default(){return[]}}},data:function data(){return{form:{title:"",content:"",principal_id:void 0,principal_name:"",orderby:void 0,type:null,endtime:null,starttime:null},rules:{title:[{required:!0,trigger:"change",message:"标题不能为空"}],content:[{required:!0,trigger:"change",message:"描述不能为空"}],principal_id:[{required:!0,trigger:"change",message:"负责人不能为空"}],type:[{required:!0,trigger:"change",message:"优先级不能为空"}],endtime:[{required:!0,trigger:"change",message:"截止日期不能为空"}],starttime:[{required:!0,trigger:"change",message:"开始日期不能为空"}]},priorityList:utils_const.b}},computed:{principalList:function principalList(){return this.$store.state.userinfo.department_user_list},principalName:function principalName(){var _this=this,res=this.userlist.filter((function(item){return item.uid==_this.form.principal_id}));return 0<res.length?res[0].realname:""}},methods:_objectSpread(_objectSpread({},Object(vuex_esm.b)("task/task",["addTask","editTask"])),{},{cancel:function cancel(){this.$emit("update:visible",!1)},resetForm:function resetForm(){this.form={title:"",content:"",endtime:null,starttime:null,principal_id:void 0,principal_name:"",type:null},this.$refs.form.resetFields()},onSubmit:function onSubmit(){var _this2=this;this.$refs.form.validate((function(valid){valid&&(_this2.isEdit?(_this2.form.endtime=_this2.form.endtime/1e3,_this2.form.starttime=_this2.form.starttime/1e3,_this2.editTask(_this2.form).then((function(){_this2.$emit("success"),_this2.$nextTick((function(){_this2.resetForm()}))}))):(_this2.form.project_id=_this2.projectId,_this2.form.task_list_id=_this2.checklistId,_this2.form.parentId=_this2.parentId,_this2.form.endtime=_this2.form.endtime/1e3,_this2.form.starttime=_this2.form.starttime/1e3,_this2.addTask(_this2.form).then((function(){_this2.$emit("success"),_this2.$nextTick((function(){_this2.resetForm()}))})).catch((function(){_this2.$emit("success")}))))}))}}),watch:{editData:{handler:function handler(newVal){var _this3=this;this.$nextTick((function(){newVal.task_id&&(_this3.form=Object.assign({},newVal),_this3.form.endtime=1e3*_this3.form.endtime,_this3.form.starttime=1e3*_this3.form.starttime)}))},immediate:!0,deep:!0},isEdit:{handler:function handler(newVal){var _this4=this;newVal||this.$nextTick((function(){_this4.resetForm()}))},immediate:!0,deep:!0}}},componentNormalizer=__webpack_require__(96),component=Object(componentNormalizer.a)(task_addTaskvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"wrap-form",staticStyle:{padding:"0"}},[_c("el-form",{ref:"form",staticClass:"my-form",attrs:{model:_vm.form,rules:_vm.rules,"label-position":"top","label-width":"80px"}},[_c("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[_c("el-input",{attrs:{rows:3,placeholder:"标题"},model:{value:_vm.form.title,callback:function($$v){_vm.$set(_vm.form,"title","string"==typeof $$v?$$v.trim():$$v)},expression:"form.title"}})],1),_vm._v(" "),_c("el-row",{attrs:{gutter:4}},[_c("el-col",{attrs:{span:6}},[_c("el-form-item",{attrs:{label:"负责人",prop:"principal_id"}},[_c("el-select",{attrs:{placeholder:"请指定负责人",filterable:""},model:{value:_vm.form.principal_id,callback:function($$v){_vm.$set(_vm.form,"principal_id",_vm._n($$v))},expression:"form.principal_id"}},_vm._l(_vm.userlist,(function(item){return _c("el-option",{key:item.uid,attrs:{label:item.realname,value:item.uid}})})),1)],1)],1),_vm._v(" "),_c("el-col",{attrs:{span:6}},[_c("el-form-item",{attrs:{label:"优先级",prop:"type"}},[_c("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:_vm.form.type,callback:function($$v){_vm.$set(_vm.form,"type",_vm._n($$v))},expression:"form.type"}},_vm._l(_vm.priorityList,(function(item){return _c("el-option",{key:item.key,attrs:{label:item.name,value:item.key}},[_c("span",{style:{color:item.color}},[_vm._v(_vm._s(item.name))])])})),1)],1)],1),_vm._v(" "),_c("el-col",{attrs:{span:6}},[_c("el-form-item",{attrs:{label:"开始日期",prop:"starttime"}},[_c("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:_vm.form.starttime,callback:function($$v){_vm.$set(_vm.form,"starttime",$$v)},expression:"form.starttime"}})],1)],1),_vm._v(" "),_c("el-col",{attrs:{span:6}},[_c("el-form-item",{attrs:{label:"截止日期",prop:"endtime"}},[_c("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:_vm.form.endtime,callback:function($$v){_vm.$set(_vm.form,"endtime",$$v)},expression:"form.endtime"}})],1)],1)],1),_vm._v(" "),_c("el-form-item",{attrs:{label:"任务描述",prop:"content"}},[_c("el-input",{attrs:{type:"textarea",rows:6,placeholder:"描述"},model:{value:_vm.form.content,callback:function($$v){_vm.$set(_vm.form,"content","string"==typeof $$v?$$v.trim():$$v)},expression:"form.content"}})],1)],1),_vm._v(" "),_c("div",{staticClass:"submit-box"},[_c("el-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:_vm.onSubmit}},[_vm._v("保存")]),_vm._v(" "),_c("el-button",{staticClass:"submit-btn",attrs:{type:""},on:{click:_vm.cancel}},[_vm._v("取消")])],1)],1)}),[],!1,null,null,null);__webpack_exports__.default=component.exports},685:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(34),__webpack_require__(29),__webpack_require__(9),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(23),__webpack_require__(37);var defineProperty=__webpack_require__(12),vuex_esm=__webpack_require__(193),components_popovervue_type_script_lang_js_={name:"my-popover",props:{title:{type:String,default:""},hoverColor:{type:String,default:""},selectList:{type:Array,default:function _default(){return[]}}},data:function data(){return{isShow:!1}},computed:{hoverColorClass:function hoverColorClass(){return this.hoverColor}},methods:{itemClick:function itemClick(item){this.$emit("select",item),this.$refs.myPopover.$data.showPopper=!1},popoverClick:function popoverClick(event){console.log(event),event.stopPropagation()}}},componentNormalizer=(__webpack_require__(1604),__webpack_require__(96)),popover=Object(componentNormalizer.a)(components_popovervue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("el-popover",{ref:"myPopover",staticClass:"my-popover",attrs:{trigger:"click",placement:"bottom",width:"100"},nativeOn:{click:function($event){return _vm.popoverClick($event)}}},[_c("div",{staticClass:"pop-select-box"},_vm._l(_vm.selectList,(function(item){return _c("div",{key:item.key,staticClass:"pop-select-item",class:_vm.hoverColorClass,style:{color:item.color},on:{click:function($event){return _vm.itemClick(item)}}},[_vm._v(_vm._s(item.name))])})),0),_vm._v(" "),_vm._t("reference",null,{slot:"reference"})],2)}),[],!1,null,"79c5755b",null).exports,card=__webpack_require__(1575),avatar=__webpack_require__(1576),utils_const=__webpack_require__(1550);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var task_taskItemvue_type_script_lang_js_={components:{Mycard:card.a,Myavatar:avatar.a,Mypopover:popover},props:{taskInfo:{type:Object,default:function _default(){return{}}}},filters:{taskStatusText:function taskStatusText(val){return utils_const.c[val]||""},taskLevelText:function taskLevelText(val){return utils_const.a[val]||""}},data:function data(){return{taskStatusMap:utils_const.d,taskLevelMap:utils_const.b}},computed:{isExpired:function isExpired(){if(2===this.taskInfo.status)return"";var nowTime=(new Date).getTime();return 1e3*this.taskInfo.endtime<nowTime?"expired":""},isFinish:function isFinish(){return 2===this.taskInfo.status}},methods:_objectSpread(_objectSpread({},Object(vuex_esm.b)("task/task",["editTask"])),{},{itemStatusStyle:function itemStatusStyle(status){var current=this.taskStatusMap.filter((function(item){return item.key===status}));return 0<current.length?"color: ".concat(current[0].color,";background: ").concat(current[0].bgColor):""},itemLevelStyle:function itemLevelStyle(level){var current=this.taskLevelMap.filter((function(item){return item.key===level}));return 0<current.length?"color: ".concat(current[0].color,";background: ").concat(current[0].bgColor):""},taskClick:function taskClick(){this.$emit("taskClick",this.taskInfo)},changeStatus:function changeStatus(cData){var _this=this;this.taskInfo.status!==cData.key&&this.editTask({task_id:this.taskInfo.task_id,status:cData.key}).then((function(){_this.taskInfo.status=cData.key}))},changeLevel:function changeLevel(cData){var _this2=this;this.taskInfo.type!==cData.key&&this.editTask({task_id:this.taskInfo.task_id,type:cData.key}).then((function(){_this2.taskInfo.type=cData.key}))}})},taskItem_component=(__webpack_require__(1606),Object(componentNormalizer.a)(task_taskItemvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("Mycard",{staticClass:"project-item",class:_vm.isFinish?"notdrag":"",attrs:{taskid:_vm.taskInfo.task_id,orderby:_vm.taskInfo.orderby},nativeOn:{click:function($event){return _vm.taskClick($event)}},scopedSlots:_vm._u([{key:"top",fn:function(){return[_c("div",{staticClass:"project-create-date",class:_vm.isExpired},[_c("i",{staticClass:"iconfont iconicon_time_line_mode"}),_vm._v(" "+_vm._s(_vm._f("formatDate")(_vm.taskInfo.endtime))+" ")]),_vm._v(" "),_c("div",{staticClass:"project-title",attrs:{title:_vm.taskInfo.title}},[_vm._v(_vm._s(_vm.taskInfo.title))]),_vm._v(" "),_c("div",[_c("Mypopover",{staticStyle:{"margin-right":"20px"},attrs:{selectList:_vm.taskStatusMap},on:{select:_vm.changeStatus}},[_c("div",{staticClass:"project-progress",style:_vm.itemStatusStyle(_vm.taskInfo.status),attrs:{slot:"reference"},slot:"reference"},[_vm._v(_vm._s(_vm._f("taskStatusText")(_vm.taskInfo.status)))])]),_vm._v(" "),_c("Mypopover",{attrs:{selectList:_vm.taskLevelMap},on:{select:_vm.changeLevel}},[_c("div",{staticClass:"project-progress",style:_vm.itemLevelStyle(_vm.taskInfo.type),attrs:{slot:"reference"},slot:"reference"},[_c("i",{staticClass:"iconfont iconicon_youxianji_nor"}),_vm._v(" "+_vm._s(_vm._f("taskLevelText")(_vm.taskInfo.type)))])])],1),_vm._v(" "),_vm.isFinish?_c("div",{staticClass:"finish"}):_vm._e()]},proxy:!0},{key:"bottom",fn:function(){return[_c("div",{staticClass:"task-principal"},[_c("Myavatar",{attrs:{userName:_vm.taskInfo.principal_name}}),_vm._v(" "),_c("span",{staticStyle:{"padding-left":"10px"}},[_vm._v(_vm._s(_vm.taskInfo.principal_name))])],1)]},proxy:!0}])})}),[],!1,null,"7d01055c",null));__webpack_exports__.default=taskItem_component.exports},686:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(271),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(23),__webpack_require__(37);var defineProperty=__webpack_require__(12),vuex_esm=(__webpack_require__(402),__webpack_require__(193));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var task_addChecklistvue_type_script_lang_js_={name:"",props:{editData:{type:Object,default:function _default(){return{}}},projectId:{type:Number,default:0}},data:function data(){return{form:{project_id:this.projectId,title:"",orderby:0},rules:{title:[{required:!0,trigger:"blur",message:"清单标题不能为空"}]}}},computed:{isEdit:function isEdit(){return!!this.editData.pid}},methods:_objectSpread(_objectSpread({},Object(vuex_esm.b)("task/task",["addChecklist","editChecklist"])),{},{resetForm:function resetForm(){this.form.title="",this.form.orderby=0},onSubmit:function onSubmit(){var _this=this;this.$refs.form.validate((function(valid){valid&&(_this.isEdit?_this.editChecklist(_this.form).then((function(){_this.$emit("success"),_this.resetForm()})):_this.addChecklist(_this.form).then((function(){_this.$emit("success"),_this.resetForm()})))}))}}),watch:{editData:{handler:function handler(newVal){newVal.pid&&(this.form.title=newVal.title,this.form.project_id=newVal.project_id,this.form.orderby=newVal.orderby)},immediate:!0,deep:!0},projectId:function projectId(newVal,oldVal){newVal!==oldVal&&(this.form.project_id=newVal)}}},componentNormalizer=__webpack_require__(96),component=Object(componentNormalizer.a)(task_addChecklistvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"wrap-form"},[_c("el-form",{ref:"form",staticClass:"my-form",attrs:{model:_vm.form,rules:_vm.rules,"label-width":"80px"}},[_c("el-form-item",{attrs:{label:"清单标题",prop:"title"}},[_c("el-input",{attrs:{rows:3},model:{value:_vm.form.title,callback:function($$v){_vm.$set(_vm.form,"title",$$v)},expression:"form.title"}})],1)],1),_vm._v(" "),_c("div",{staticClass:"submit-box"},[_c("el-button",{attrs:{type:"primary"},on:{click:_vm.onSubmit}},[_vm._v("创建清单")])],1)],1)}),[],!1,null,null,null);__webpack_exports__.default=component.exports},687:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(41),__webpack_require__(42),__webpack_require__(19),__webpack_require__(10),__webpack_require__(43),__webpack_require__(23),__webpack_require__(37);var defineProperty=__webpack_require__(12),vuex_esm=__webpack_require__(193);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var task_taskTitlevue_type_script_lang_js_={name:"",props:{itemData:{type:Object,default:function _default(){return{}}}},data:function data(){return{inputTitle:this.itemData.title,isEdit:!1}},computed:{total:function total(){return this.itemData.project_task.length}},methods:_objectSpread(_objectSpread({},Object(vuex_esm.b)("task/task",["editChecklist"])),{},{editTitle:function editTitle(){var _this=this;this.isEdit=!0,this.$nextTick((function(){_this.$refs.inputs.focus()}))},change:function change(){var _this2=this;this.isEdit=!1,this.editChecklist({task_list_id:this.itemData.task_list_id,title:this.inputTitle}).then((function(){_this2.itemData.title=_this2.inputTitle})).catch((function(){_this2.inputTitle=_this2.itemData.title}))},blur:function blur(){this.isEdit=!1}})},componentNormalizer=(__webpack_require__(1601),__webpack_require__(96)),component=Object(componentNormalizer.a)(task_taskTitlevue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"task-title-wrap"},[_c("div",{staticClass:"task-drag-box"}),_vm._v(" "),_vm.isEdit?_c("div",{staticClass:"title"},[_c("el-input",{ref:"inputs",attrs:{size:"small"},on:{blur:_vm.blur,change:_vm.change},model:{value:_vm.inputTitle,callback:function($$v){_vm.inputTitle=$$v},expression:"inputTitle"}})],1):_c("div",{staticClass:"title",on:{click:_vm.editTitle}},[_vm._v(_vm._s(_vm.itemData.title))]),_vm._v(" "),_c("div",{staticClass:"task-total"},[_vm._v("任务数 "+_vm._s(_vm.total))])])}),[],!1,null,null,null);__webpack_exports__.default=component.exports}}]);
//# sourceMappingURL=task.9cef9450fc4cbe6433a5.bundle.js.map